<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <%- include('partials/header', { page: page, isAuthenticated: isAuthenticated }) %>

    <div class="main-content">
        <div class="container">
            <div class="links-container">
                <h2>Enlaces Oficiales - Ministerio del Interior</h2>
                <p>Accede a informaci√≥n oficial del Ministerio del Interior de Uruguay.</p>

                <div id="linksList">
                    <p class="text-center">Cargando enlaces...</p>
                </div>
            </div>
        </div>
    </div>

    <%- include('partials/footer') %>

    <script>
        document.addEventListener('DOMContentLoaded', loadLinks);

        async function loadLinks() {
            try {
                const response = await fetch('/api/links/mi');
                const data = await response.json();

                const linksList = document.getElementById('linksList');
                linksList.innerHTML = data.links.map(link => `
                    <div class="link-item">
                        <h3>${link.name}</h3>
                        <p>${link.description}</p>
                        <a href="${link.url}" target="_blank" class="btn btn-primary">
                            Visitar &rarr;
                        </a>
                    </div>
                `).join('');

                linksList.innerHTML += `
                    <div class="mt-4">
                        <p><em>${data.disclaimer}</em></p>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading links:', error);
                document.getElementById('linksList').innerHTML = '<p class="text-center">Error al cargar enlaces</p>';
            }
        }
    </script>
</body>
</html>
