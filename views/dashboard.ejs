<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <%- include('partials/theme-init') %>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/dashboard.css">
    <script src="/js/theme-toggle.js" defer></script>
</head>
<body>
    <%- include('partials/header', { page: 'dashboard', isAuthenticated: isAuthenticated }) %>

    <div class="dashboard-container">
        <div class="dashboard-header">
            <div>
                <h1>Bienvenido a Vortex</h1>
                <p style="color: var(--text-secondary); margin-top: 0.5rem;">Tu resumen de actividad reciente</p>
            </div>
            <div class="user-info">
                <img id="userAvatar" class="user-avatar" src="" alt="Avatar">
                <div class="user-details">
                    <h3 id="userName">Cargando...</h3>
                    <p id="userEmail">usuario@ejemplo.com</p>
                </div>
                <button class="notifications-btn" onclick="openNotificationsModal()">
                    ğŸ””
                    <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                </button>
            </div>
        </div>

        <section class="dashboard-insights">
            <div class="insight-card">
                <header>
                    <span class="icon">ğŸ•’</span>
                    <h3>Fecha y Hora</h3>
                </header>
                <p class="insight-value">Martes, 04 de febrero Â· 14:37</p>
                <p class="insight-meta">Montevideo (UTC-3)</p>
            </div>
            <div class="insight-card">
                <header>
                    <span class="icon">ğŸŒ¦ï¸</span>
                    <h3>Clima Actual</h3>
                </header>
                <p class="insight-value">26Â°C Â· Parcialmente nublado</p>
                <p class="insight-meta">SensaciÃ³n tÃ©rmica 27Â°C Â· Viento 12 km/h</p>
            </div>
            <div class="insight-card">
                <header>
                    <span class="icon">ğŸ’±</span>
                    <h3>Divisas</h3>
                </header>
                <ul class="insight-list">
                    <li>USD / UYU <strong>â†‘ 42,80</strong></li>
                    <li>EUR / UYU <strong>â†“ 46,10</strong></li>
                    <li>BRL / UYU <strong>â†‘ 8,25</strong></li>
                </ul>
                <p class="insight-meta">VariaciÃ³n diaria respecto al cierre anterior</p>
            </div>
            <div class="insight-card">
                <header>
                    <span class="icon">â‚¿</span>
                    <h3>Bitcoin</h3>
                </header>
                <p class="insight-value">USD 42.580</p>
                <p class="insight-meta">Cambio 24h: <span class="positive">+2.6%</span></p>
            </div>
        </section>

        <div class="dashboard-grid">
            <!-- Centinel Alerts Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h2><span class="icon">ğŸš¨</span> Alertas de Centinel</h2>
                    <a href="/centinel" class="view-all-btn">Ver todas</a>
                </div>
                <div class="item-list" id="centinelList">
                    <div class="loading">Cargando alertas...</div>
                </div>
            </div>

            <!-- Surlink Posts Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h2><span class="icon">ğŸ </span> Nuevos en Surlink</h2>
                    <a href="/surlink" class="view-all-btn">Ver todas</a>
                </div>
                <div class="item-list" id="surlinkList">
                    <div class="loading">Cargando publicaciones...</div>
                </div>
            </div>

            <!-- Forum Threads Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h2><span class="icon">ğŸ’¬</span> Foro Vortex</h2>
                    <a href="/forum-vortex" class="view-all-btn">Ver todas</a>
                </div>
                <div class="item-list" id="forumList">
                    <div class="loading">Cargando discusiones...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div id="notificationsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”” Notificaciones</h2>
                <button class="close-btn" onclick="closeNotificationsModal()">Ã—</button>
            </div>
            <div id="notificationsList">
                <div class="loading">Cargando notificaciones...</div>
            </div>
            <button class="mark-all-read-btn" onclick="markAllAsRead()">Marcar todas como leÃ­das</button>
        </div>
    </div>

    <%- include('partials/footer') %>

    <script src="/js/dashboard.js"></script>
</body>
</html>
